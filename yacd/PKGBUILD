# Maintainer: Duama <admin@duama.top>

pkgname=yacd
pkgver=0.3.0
pkgrel=1
pkgdesc="Yet Another Clash Dashboard"
arch=('any')
url="https://github.com/haishanh/yacd"
license=('MIT')
depends=()
makedepends=('yarn')
source=("$pkgname-$pkgver.tar.gz::https://github.com/haishanh/$pkgname/archive/v$pkgver.tar.gz")
sha256sums=('d1bc6ced8adb9f2871b3eff35c65beb1d0185894730ed62f016e2d21fb6337ec')

prepare() {
    cd $pkgname-$pkgver

    sed -i '/"fontsource-open-sans":/d' package.json
    sed -i '/"fontsource-roboto-mono":/d' package.json
    sed -i "/import '@fontsource\//d" src/components/Root.tsx

    yarn install --frozen-lockfile
}

build() {
    cd $pkgname-$pkgver

    yarn run build
}

package() {
    cd $pkgname-$pkgver/public

    find . -type f -exec install -Dm644 {} "$pkgdir"/usr/share/webapps/$pkgname/{} \;
}
