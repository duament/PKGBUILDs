# Maintainer: Duama <admin@duama.top>
# Contributor: Tom Hacohen <tom@stosb.com>
# Contributor: David Runge <dave@sleepmap.de>

pkgname=etesync-dav
pkgver=0.30.8
pkgrel=1
pkgdesc="A CalDAV and CardDAV adapter for EteSync"
arch=('any')
url="https://github.com/etesync/etesync-dav"
license=('GPL')
depends=('python-appdirs'
         'python-etesync'
         'python-etebase'
         'radicale>=3.0.0'
         'python-flask'
         'python-flask-wtf'
)
makedepends=('python-setuptools')
replaces=('python-radicale-storage-etesync')
source=("$pkgname-$pkgver.tar.gz::https://github.com/etesync/$pkgname/archive/v$pkgver.tar.gz")
sha256sums=('78582c0671b739ac140a378aeaec888c8c8e74132344903f4cd750345a73f5df')

build() {
  cd $pkgname-$pkgver

  python setup.py build
}

package() {
  cd $pkgname-$pkgver

  python setup.py install --root=$pkgdir --optimize=1 --skip-build
  install -Dm644 DESCRIPTION.rst $pkgdir/usr/share/doc/$pkgname/DESCRIPTION.rst
  install -Dm644 README.md $pkgdir/usr/share/doc/$pkgname/README.md
  install -Dm644 examples/systemd-user/etesync-dav.service $pkgdir/usr/lib/systemd/user/etesync-dav.service
}

